import{a as i,A as v,O as s,F as f,B as x,q as p,ak as b,n as V,$ as w,a0 as z,ci as y,cj as A,ck as C,X as S,cl as $,m}from"./index-DWUfVN7j.js";import{E as n}from"./message-mY8KK5KY.js";import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";const g=c=>(w("data-v-9755b53c"),c=c(),z(),c),Z={class:"content"},I={class:"loginForm"},E=g(()=>s("div",{class:"title"},"登录",-1)),N={class:"tabs flex-center"},U={class:"formBox"},R={class:"flex-center-center"},D={key:0,class:"flex-center-center mt32"},F={key:1,class:"flex-center-center mt32"},P=g(()=>s("div",{class:"btn2 flex-center-center"},"注册",-1)),T={__name:"login",setup(c){const a=i(1),l=i(""),r=i(""),d=i("");async function h(){let t;const e=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/;_()?(e.test(l.value)?t=await y({email:l.value,event:"login"}):t=await A({mobile:l.value,event:"login"}),t.code===0?n.success("发送成功"):n.error(t.msg)):n.error("请输入正确的手机号或邮箱")}async function k(){let t;_()?(t=await C({login_type:a.value-1,account:l.value,password:r.value,captcha:d.value}),t.code===0?(n.success("登录成功"),S().setToken(t.data.token.access_token),setTimeout(()=>{$.push("/")},1e3)):n.error(t.error.msg)):n.error("请输入正确的手机号或邮箱")}function _(){const t=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/,e=/^\d{10}$/;return t.test(l.value)?!0:e.test(l.value)}return(t,e)=>{const u=b;return m(),v("div",Z,[s("div",I,[E,s("div",N,[s("div",{onClick:e[0]||(e[0]=o=>a.value=1),class:f({atab:a.value==1,tab:a.value==2})},"密码登录",2),s("div",{onClick:e[1]||(e[1]=o=>a.value=2),class:f({atab:a.value==2,tab:a.value==1})},"验证码登录",2)]),s("div",U,[s("div",R,[p(u,{modelValue:l.value,"onUpdate:modelValue":e[2]||(e[2]=o=>l.value=o),style:{width:"500px",height:"55px"},size:"large",placeholder:"电话/邮箱"},null,8,["modelValue"])]),a.value==1?(m(),v("div",D,[p(u,{modelValue:r.value,"onUpdate:modelValue":e[3]||(e[3]=o=>r.value=o),style:{width:"500px",height:"55px"},type:"password",size:"large",placeholder:"密码"},null,8,["modelValue"])])):x("",!0),a.value==2?(m(),v("div",F,[p(u,{modelValue:d.value,"onUpdate:modelValue":e[4]||(e[4]=o=>d.value=o),style:{width:"500px",height:"55px"},size:"large",placeholder:"验证码"},{suffix:V(()=>[s("div",{onClick:h,class:"codeBtn flex-center-center"},"获取验证码")]),_:1},8,["modelValue"])])):x("",!0),s("div",{class:"btns flex-center-center"},[s("div",{onClick:k,class:"btn1 flex-center-center"},"登录"),P])])])])}}},M=B(T,[["__scopeId","data-v-9755b53c"]]);export{M as default};
